<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>JSONRPC Framework: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Ali's JSON-RPC Framework documentation</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="Overview">Overview </a></h1><p>Briefely, you use this framework like this:</p>
<ol>
<li>
<p class="startli">Create a <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> object by passing the URL of the WebService: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a>* service = [[<a class="code" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> alloc] initWithURL:kServiceURL];
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Call a remote procedure of the WebService using JSON-RPC. To do this, you have <b>multiple equivalent possibilities</b>: </p>
<ul>
<li>
<p class="startli">Use the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithName:parameters: (JSONRPCService)</a> method, passing it the name of the method to call (an NSString) and its parameters (an NSArray)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Use the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams: (JSONRPCService)</a> method, passing it the name (NSString) of the method to call, followed by a variable number of arguments representing the parameters, terminated by 'nil'.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Create a <a class="el" href="interface_j_s_o_n_r_p_c_method_call.html" title="This class represent a method call on a JSON-RPC WebService.">JSONRPCMethodCall</a> object, passing it the name of the method to call and its arguments, then pass it to the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#a73a9b9f0669b7aa99c9dbb148a009e10" title="Designed method to call a JSON-RPC method on the WebService.">callMethod: (JSONRPCService)</a> to actually call the method. (This is actually what the two previous options do in their implementation).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Ask the <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> for a proxy object (see <a class="el" href="interface_j_s_o_n_r_p_c_service.html#a10d83b3d133196f7476d83fc12dfefe6" title="A proxy object on which you can call any Obj-C message (without any param or with...">JSONRPCService::proxy</a>), then call directly any method you want as an Objective-C call (as if it was the WebService itself), with the arguments in an NSArray. The following 3 lines will in fact be equivalent: </p>
<div class="fragment"><pre class="fragment">        [service.proxy echo:[NSArray arrayWithObject:@&quot;Hello there&quot;]]
        [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithName</a>:@&quot;echo&quot; <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">parameters</a>:[NSArray arrayWithObject:@&quot;Hello there&quot;]];
        [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams</a>:@&quot;echo&quot;,@&quot;Hello there&quot;,nil];
</pre></div> <p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">To handle the response from the server, use the <a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a> object returned by the method used to make the call: </p>
<ul>
<li>
You can set a delegate and callback to call when the response comes. The callback should be a @selector that accept 3 parameters : a <a class="el" href="interface_j_s_o_n_r_p_c_method_call.html" title="This class represent a method call on a JSON-RPC WebService.">JSONRPCMethodCall</a> object, a generic object representing the response, and an NSError.  </li>
<li>
You can also set the Class you want the result to be converted into. <ul>
<li>
This class should respond to initWithJson: to be initialized using the JSON object </li>
<li>
Optionally, this class may also respond to -jsonProxy to be converted back to a JSON object if needed later (see SBJSON documentation)  </li>
<li>
If the JSON object returned by the WebService is an array, the convertion from the JSON object to the given Class will be done on the objects in this array, so that e.g. an array of objects representing a person could be converted into an NSArray of Person objects. </li>
</ul>
</li>
</ul>
<div class="fragment"><pre class="fragment">   <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a>* h = [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams</a>:@&quot;echo&quot;,@&quot;Hello there&quot;,nil];
   [h <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#af7facf819d16d4b6cd1c3375a5e78da1" title="set both the delegate and the callback to call upon receiving the WebService&amp;#39;s...">setDelegate</a>:self <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#af7facf819d16d4b6cd1c3375a5e78da1" title="set both the delegate and the callback to call upon receiving the WebService&amp;#39;s...">callback</a>:@selector(<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#af7facf819d16d4b6cd1c3375a5e78da1" title="set both the delegate and the callback to call upon receiving the WebService&amp;#39;s...">methodCall</a>:<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#af7facf819d16d4b6cd1c3375a5e78da1" title="set both the delegate and the callback to call upon receiving the WebService&amp;#39;s...">didReturnResult</a>:<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#af7facf819d16d4b6cd1c3375a5e78da1" title="set both the delegate and the callback to call upon receiving the WebService&amp;#39;s...">error</a>:)];
   [h setResultClass:[MyCustomClass class]]; <span class="comment">// optional, don&#39;t write this line if you can&#39;t to receive the JSON object directly</span>
</pre></div><p> Or more concisely: </p>
<div class="fragment"><pre class="fragment">   [[service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams</a>:@&quot;echo&quot;,@&quot;Hello there&quot;,nil]
    <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#aba218cf1475f6e3fe50944484219330d" title="set both the delegate, the callback and the resultClass at once.">setDelegate</a>:self <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#aba218cf1475f6e3fe50944484219330d" title="set both the delegate, the callback and the resultClass at once.">callback</a>:@selector(<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#aba218cf1475f6e3fe50944484219330d" title="set both the delegate, the callback and the resultClass at once.">methodCall</a>:<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#aba218cf1475f6e3fe50944484219330d" title="set both the delegate, the callback and the resultClass at once.">didReturnResult</a>:error) <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#aba218cf1475f6e3fe50944484219330d" title="set both the delegate, the callback and the resultClass at once.">resultClass</a>:[MyCustomClass class]];
</pre></div> <p class="endli"></p>
</li>
<li>
Of course don't forget to release your <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> when you are done.  </li>
</ol>
<p>For more information, you can look at the <a class="el" href="_example.html">Example</a>. </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri May 21 20:32:25 2010 for JSONRPC Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
