<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>JSONRPC Framework: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="index.html">Ali's JSON-RPC Framework documentation</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="Overview">Overview </a></h1><p>Briefely, you use this framework like this:</p>
<ol>
<li>
<p class="startli">Create a <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> object by passing the URL of the WebService: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a>* service = [[<a class="code" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> alloc] initWithURL:kServiceURL];
</pre></div><p class="endli"></p>
</li>
<li>
<p class="startli">Call a remote procedure of the WebService using JSON-RPC. To do this, you have <b>multiple equivalent possibilities</b>: </p>
<ul>
<li>
<p class="startli">Use the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithName:parameters: (JSONRPCService)</a> method, passing it the name of the method to call (an NSString) and its parameters (an NSArray)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Use the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams: (JSONRPCService)</a> method, passing it the name (NSString) of the method to call, followed by a variable number of arguments representing the parameters, terminated by 'nil'.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Create a <a class="el" href="interface_j_s_o_n_r_p_c_method_call.html" title="This class represent a method call on a JSON-RPC WebService.">JSONRPCMethodCall</a> object, passing it the name of the method to call and its arguments, then pass it to the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#a73a9b9f0669b7aa99c9dbb148a009e10" title="Designed method to call a JSON-RPC method on the WebService.">callMethod: (JSONRPCService)</a> to actually call the method. (This is actually what the two previous options do in their implementation).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Ask the <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> for a proxy object (see <a class="el" href="interface_j_s_o_n_r_p_c_service.html#a10d83b3d133196f7476d83fc12dfefe6" title="A proxy object on which you can call any Obj-C message (without any param or with...">JSONRPCService::proxy</a>), then call directly any method you want as an Objective-C call (as if it was the WebService itself), with the arguments in an NSArray. The following 3 lines will in fact be equivalent: </p>
<div class="fragment"><pre class="fragment">        [service.proxy echo:[NSArray arrayWithObject:@&quot;Hello there&quot;]]
        [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithName</a>:@&quot;echo&quot; <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">parameters</a>:[NSArray arrayWithObject:@&quot;Hello there&quot;]];
        [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams</a>:@&quot;echo&quot;,@&quot;Hello there&quot;,nil];
</pre></div> <p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">To handle the response from the server, use the <a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a> object returned by the method used to make the call: </p>
<ul>
<li>
If you don't do anything with the <a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a> (neither set a delegate nor a the callback), the method <a class="el" href="protocol_j_s_o_n_r_p_c_delegate-p.html">methodCall:didReturn:error:</a> will be called on the <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> 's delegate. If no delegate is set on the <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> object neither, the response will be ignored. </li>
<li>
If you set the delegate of the <a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a> object (<a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html#a8b58e7b4c93462c5192f734c576334a8" title="The delegate object on which the callback will be called.">JSONRPCResponseHandler::delegate</a>:), this object will handle the response for this methodCall instead of the JSONRPCService's delegate. This is useful if you have a unique <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> object (e.g. singleton) and call it from multiple places in your project, to define different delegate objects depending on the place you call the service from, etc. </li>
<li>
You can also set the callback (@selector) to call instead of the default <a class="el" href="protocol_j_s_o_n_r_p_c_delegate-p.html">methodCall:didReturn:error:</a>. The callback should be a @selector that accept 3 parameters : a <a class="el" href="interface_j_s_o_n_r_p_c_method_call.html" title="This class represent a method call on a JSON-RPC WebService.">JSONRPCMethodCall</a> object, a generic object representing the response, and an NSError. (as the <a class="el" href="protocol_j_s_o_n_r_p_c_delegate-p.html">methodCall:didReturn:error:</a> @selector).  <div class="fragment"><pre class="fragment">        <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a>* h = [service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithName</a>:@&quot;echo&quot; <a class="code" href="interface_j_s_o_n_r_p_c_service.html#aeb4b174af586824d86ae4c438cbb1971" title="Commodity method to call a JSON-RPC method on the WebService.">parameters</a>:mkArray(@&quot;Hello there&quot;)];
        <span class="comment">// (1) If we stop here, the response will be received by the JSONRPCService&#39;s delegate method methodCall:didReturn:error:</span>

        [h setDelegate:x];
        <span class="comment">// at this stage, the response will be received by x through the method methodCall:didReturn:error:</span>

        [h setCallback:@selector(remoteProcedureCall:didReturnObject:serviceError:)];
        <span class="comment">// at this stage, the response will be received by x through the method remoteProcedureCall:didReturnObject:serviceError:</span>
</pre></div> </li>
<li>
You can also set the Class you want the result to be converted into. <ul>
<li>
This class should respond to initWithJson: to be initialized using the JSON object </li>
<li>
Optionally, this class may also respond to -jsonProxy to be converted back to a JSON object if needed later (see SBJSON documentation)  </li>
<li>
If the JSON object returned by the WebService is an array, the convertion from the JSON object to the given Class will be done on the objects in this array, so that e.g. an array of objects representing a person could be converted into an NSArray of Person objects. </li>
</ul>
</li>
</ul>
<p>Note that you can nest tje <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> method call with the <a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html" title="an intermediate object returned by the JSONRPCService when you call a method, to...">JSONRPCResponseHandler</a> calls to be more concise: </p>
<div class="fragment"><pre class="fragment">   [[service <a class="code" href="interface_j_s_o_n_r_p_c_service.html#ad5c6e7abfbbdfc73e32f7461677965b5" title="Commodity method to call a JSON-RPC method on the WebService.">callMethodWithNameAndParams</a>:@&quot;echo&quot;,@&quot;Hello there&quot;,nil]
    <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#a305c8ac7ca06265ed673ef97d0b12b1a" title="set both the delegate, the callback and the resultClass at once.">setDelegate</a>:self <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#a305c8ac7ca06265ed673ef97d0b12b1a" title="set both the delegate, the callback and the resultClass at once.">callback</a>:@selector(<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#a305c8ac7ca06265ed673ef97d0b12b1a" title="set both the delegate, the callback and the resultClass at once.">methodCall</a>:<a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#a305c8ac7ca06265ed673ef97d0b12b1a" title="set both the delegate, the callback and the resultClass at once.">didReturn</a>:error) <a class="code" href="interface_j_s_o_n_r_p_c_response_handler.html#a305c8ac7ca06265ed673ef97d0b12b1a" title="set both the delegate, the callback and the resultClass at once.">resultClass</a>:[MyCustomClass class]];
</pre></div> <p class="endli"></p>
</li>
<li>
Of course don't forget to release your <a class="el" href="interface_j_s_o_n_r_p_c_service.html" title="The class representing a JSON-RPC WebService (identified by an URL to call methods...">JSONRPCService</a> when you are done.  </li>
</ol>
<p>As you can see, the usage of this framework is highly flexible. You can call a JSON-RPC method using multiple different syntaxes, and you can also receive the response in the way you think it's the best suitable for your project, centralizing the responses on one object (the <a class="el" href="interface_j_s_o_n_r_p_c_service.html#ad5361d24af5c0e36868d423320f18ae1" title="Object to handle errors if not handled by JSONRPCResponseHandler::delegate .">JSONRPCService::delegate</a>) or on separate objects (<a class="el" href="interface_j_s_o_n_r_p_c_response_handler.html#a8b58e7b4c93462c5192f734c576334a8" title="The delegate object on which the callback will be called.">JSONRPCResponseHandler::delegate</a>) and calling a unique @selector method for handling the response of all your method calls, or a different @selector for each.</p>
<p>For more information, you can look at the <a class="el" href="_example.html">Example</a>. </p>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed May 26 00:30:31 2010 for JSONRPC Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
